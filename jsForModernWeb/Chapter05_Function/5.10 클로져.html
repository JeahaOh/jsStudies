<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript Studies</title>
    <style></style>
    <script></script>
</head>
<body>
    <h1>클로져</h1>
    <p>
        클로저의 정의를 살펴보기 전에 클로저가 무엇인지 예제로 살펴봄.
    </p>
    <!--
    <script>
        console.log('code 5-26 지역 변수의 유효 범위');
        //  함수 선언
        function test(name){
            var output = name + 'from Hell..!'
        }
        
        //  출력
        console.log(output);
    </script>
    -->
    <pre>
    함수 안의 변수는 지역 변수 이므로 함수 외부에서 사용할 수 없음.
    지역변수는 함수가 실행될 때 생성되고 함수가 종료될 때 사라짐.
        
    But!!
        클로져(closure)를 사용하면 이 규칙을 넘어 설 수 있음.
    </pre>
    <script>
        console.log('code 5-27 클로져 I');
        // 함수 선언
        function test(name){
            var output = name + ' from Hell..!';
            return function(){
                alert(output);
            };
        }
        
        // 출력
        test('JavaScript')();
    </script>
    <pre>
    변수 output은 지역변수 이므로 함수가 종료 될 때 사라져야함.
    그러나 해당 변수가 이후에도 활용 가능겅이 있으므로 javaScript는 변수를 제거하디 않고 남겨둠.
    따라서 코드를 실행하면 alert 창이 뜨는것.
    
    클로져의 정의는 다양함.
    이렇게 지역 변수를 남겨두는 현상을 클로져라고 부르기도 하고,
    함수 test() 내부릐 변수들이 살아있는 것이므로 test()함수로 생성된 송간을 클로져라고 부르기도 함.
    또한 변수 output을 클로져라고 부르기도 함.
    
        !정의가 워낙 다양해서 헛갈릴 수 있지만, 어떤것인지 감만 잡아 두도록!
    
    추가로 지역변수 output을 남겨둔다고 외부에서 마음대로 사용할 수 있는 것은 아님.
    반드시 리턴된 클로저 함수를 사용해야 지역변수 output을 사용할 수 있음.
    클로저 함수로 인해 남은 지역 변수는 클로저 함수 각각의 고유한 변수임.
    
        7장 캡슐화에서 클로져에 대해 더 접할 수 있을 것임.
    </pre>
    <script>
        console.log('code 5-28 클로져 II');
        //  함수 선언
        function test(name){
            var output = name + ' from HELl..!';
            return function (){
                alert(output);
            };
        }
        
        //  변수 선언.
        var test_1 = test('WEB');
        var test_2 = test('JavaScript');
        
        // 함수 호출
        test_1();
        test_2();
    </script>
</body>
</html>
